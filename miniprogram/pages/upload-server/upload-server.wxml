<!--upload-server.wxml-->
<view class="page">
  <!-- 页面标题 -->
  <view class="page-header">
    <text class="page-title">文件上传</text>
    <text class="page-subtitle">正在将文件上传到服务器</text>
  </view>

  <view class="content">
    <!-- 上传状态 -->
    <view class="upload-status-card">
      <view class="status-icon-wrapper">
        <view class="status-icon {{uploadSuccess ? 'success' : (uploading ? 'uploading' : 'waiting')}}">
          <text class="icon-text" wx:if="{{uploadSuccess}}">✓</text>
          <text class="icon-text" wx:elif="{{uploading}}">📤</text>
          <text class="icon-text" wx:else>⏳</text>
        </view>
      </view>
      
      <view class="status-content">
        <text class="status-title" wx:if="{{uploadSuccess}}">上传完成</text>
        <text class="status-title" wx:elif="{{uploading}}">正在上传</text>
        <text class="status-title" wx:else>准备上传</text>
        
        <text class="status-desc" wx:if="{{uploadSuccess}}">文件已成功上传，订单已提交处理</text>
        <text class="status-desc" wx:elif="{{uploading}}">请保持网络连接，正在上传文件到服务器</text>
        <text class="status-desc" wx:else>即将开始上传文件</text>
      </view>
    </view>

    <!-- 文件信息 -->
    <view class="file-info-card">
      <view class="card-header">
        <text class="card-title">文件信息</text>
      </view>
      
      <view class="file-item">
        <view class="file-icon">
          <text>{{fileInfo.icon || '📄'}}</text>
        </view>
        <view class="file-details">
          <text class="file-name">{{fileInfo.name}}</text>
          <text class="file-size">{{fileInfo.sizeText || '未知大小'}}</text>
        </view>
      </view>
    </view>

    <!-- 上传进度 -->
    <view class="progress-card" wx:if="{{uploading}}">
      <view class="card-header">
        <text class="card-title">上传进度</text>
        <text class="progress-text">{{uploadProgress}}%</text>
      </view>
      
      <view class="progress-bar">
        <view class="progress-fill" style="width: {{uploadProgress}}%"></view>
      </view>
      
      <view class="progress-tips">
        <text class="tip-text">上传过程中请勿关闭页面</text>
      </view>
    </view>

    <!-- 成功状态 -->
    <view class="success-card" wx:if="{{uploadSuccess}}">
      <view class="success-content">
        <view class="success-icon">🎉</view>
        <text class="success-title">上传成功！</text>
        <text class="success-desc">您的文件已安全上传到服务器，我们将尽快为您打印</text>
        
        <view class="success-info">
          <view class="info-item">
            <text class="info-label">订单编号</text>
            <text class="info-value">{{orderId || '生成中...'}}</text>
          </view>
          <view class="info-item">
            <text class="info-label">预计完成</text>
            <text class="info-value">30分钟内</text>
          </view>
        </view>
      </view>
    </view>

    <!-- 安全提示 -->
    <view class="security-tips">
      <view class="tip-header">
        <text class="tip-title">🔒 安全承诺</text>
      </view>
      <view class="tip-list">
        <view class="tip-item">
          <text class="tip-dot">•</text>
          <text class="tip-text">文件传输采用SSL加密保护</text>
        </view>
        <view class="tip-item">
          <text class="tip-dot">•</text>
          <text class="tip-text">打印完成后自动删除文件</text>
        </view>
        <view class="tip-item">
          <text class="tip-dot">•</text>
          <text class="tip-text">严格保护用户隐私安全</text>
        </view>
      </view>
    </view>

    <!-- 操作按钮 -->
    <view class="action-buttons" wx:if="{{uploadSuccess}}">
      <button class="btn secondary" bindtap="goHome">
        <text class="btn-text">返回首页</text>
      </button>
      <button class="btn primary" bindtap="viewOrder">
        <text class="btn-text">查看订单</text>
      </button>
    </view>
  </view>
</view>
