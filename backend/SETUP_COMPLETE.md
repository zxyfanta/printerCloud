# äº‘æ‰“å°å°ç¨‹åºåç«¯ - æµ‹è¯•æ¡†æ¶å’ŒSwaggeré…ç½®å®Œæˆ

## ğŸ‰ é…ç½®å®Œæˆ

æ‚¨çš„äº‘æ‰“å°å°ç¨‹åºåç«¯é¡¹ç›®å·²æˆåŠŸé…ç½®äº†å®Œæ•´çš„æµ‹è¯•æ¡†æ¶å’ŒAPIæ–‡æ¡£ç³»ç»Ÿï¼

## ğŸ“‹ å·²å®Œæˆçš„é…ç½®

### 1. æµ‹è¯•æ¡†æ¶
- âœ… **å•å…ƒæµ‹è¯•** - ä½¿ç”¨JUnit 5å’ŒMockito
- âœ… **é›†æˆæµ‹è¯•** - å®Œæ•´çš„åº”ç”¨æµç¨‹æµ‹è¯•
- âœ… **æµ‹è¯•é…ç½®** - ç‹¬ç«‹çš„æµ‹è¯•ç¯å¢ƒé…ç½®
- âœ… **ä»£ç è¦†ç›–ç‡** - JaCoCoè¦†ç›–ç‡æŠ¥å‘Š
- âœ… **æ€§èƒ½æµ‹è¯•** - å¹¶å‘å’Œå“åº”æ—¶é—´æµ‹è¯•

### 2. APIæ–‡æ¡£ç³»ç»Ÿ
- âœ… **OpenAPI 3** - ç°ä»£åŒ–çš„APIæ–‡æ¡£æ ‡å‡†
- âœ… **Swagger UI** - äº¤äº’å¼APIæ–‡æ¡£ç•Œé¢
- âœ… **JWTè®¤è¯** - å®Œæ•´çš„è®¤è¯æµç¨‹æ”¯æŒ
- âœ… **Controlleræ³¨è§£** - è¯¦ç»†çš„APIæè¿°

### 3. æ„å»ºå·¥å…·
- âœ… **Mavenæ’ä»¶** - Surefireã€Failsafeã€JaCoCo
- âœ… **æµ‹è¯•åˆ†ç¦»** - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•åˆ†ç¦»
- âœ… **æ‰¹å¤„ç†è„šæœ¬** - Windowsç¯å¢ƒå¿«é€Ÿå¯åŠ¨è„šæœ¬

## ğŸš€ å¿«é€Ÿå¼€å§‹

### éªŒè¯é…ç½®
```bash
cd backend
verify-setup.bat
```

### è¿è¡Œæµ‹è¯•
```bash
run-tests.bat
```

### å¯åŠ¨åº”ç”¨
```bash
start-with-swagger.bat
```

## ğŸ“Š è®¿é—®åœ°å€

å¯åŠ¨åº”ç”¨åï¼Œå¯ä»¥è®¿é—®ï¼š

| æœåŠ¡ | åœ°å€ | æè¿° |
|------|------|------|
| åº”ç”¨ä¸»é¡µ | http://localhost:8080 | åº”ç”¨æ ¹è·¯å¾„ |
| å¥åº·æ£€æŸ¥ | http://localhost:8080/health | ç³»ç»ŸçŠ¶æ€æ£€æŸ¥ |
| Swagger UI | http://localhost:8080/swagger-ui/index.html | äº¤äº’å¼APIæ–‡æ¡£ |
| OpenAPI JSON | http://localhost:8080/v3/api-docs | APIè§„èŒƒJSON |

## ğŸ“ é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/printercloud/
â”‚   â”‚   â”‚   â”œâ”€â”€ config/SwaggerConfig.java     # OpenAPIé…ç½®
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/                   # æ§åˆ¶å™¨ï¼ˆå·²æ·»åŠ Swaggeræ³¨è§£ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â””â”€â”€ test/
â”‚       â”œâ”€â”€ java/com/printercloud/
â”‚       â”‚   â”œâ”€â”€ controller/                   # æ§åˆ¶å™¨æµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ service/                      # æœåŠ¡æµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ integration/                  # é›†æˆæµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ performance/                  # æ€§èƒ½æµ‹è¯•
â”‚       â”‚   â””â”€â”€ util/TestDataBuilder.java    # æµ‹è¯•æ•°æ®æ„å»ºå™¨
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application-test.yml          # æµ‹è¯•ç¯å¢ƒé…ç½®
â”œâ”€â”€ pom.xml                                   # Mavené…ç½®ï¼ˆå·²æ›´æ–°ä¾èµ–ï¼‰
â”œâ”€â”€ TEST_README.md                            # è¯¦ç»†æµ‹è¯•æŒ‡å—
â”œâ”€â”€ verify-setup.bat                          # ç¯å¢ƒéªŒè¯è„šæœ¬
â”œâ”€â”€ run-tests.bat                             # æµ‹è¯•è¿è¡Œè„šæœ¬
â””â”€â”€ start-with-swagger.bat                    # åº”ç”¨å¯åŠ¨è„šæœ¬
```

## ğŸ§ª æµ‹è¯•ç±»å‹

### å•å…ƒæµ‹è¯•
- `AuthControllerTest` - è®¤è¯æ§åˆ¶å™¨æµ‹è¯•
- `UserServiceTest` - ç”¨æˆ·æœåŠ¡æµ‹è¯•
- `HealthControllerTest` - å¥åº·æ£€æŸ¥æµ‹è¯•

### é›†æˆæµ‹è¯•
- `AuthIntegrationTest` - å®Œæ•´è®¤è¯æµç¨‹æµ‹è¯•

### æ€§èƒ½æµ‹è¯•
- `HealthPerformanceTest` - å¹¶å‘å’Œå“åº”æ—¶é—´æµ‹è¯•

## ğŸ“ˆ æµ‹è¯•æŠ¥å‘Š

è¿è¡Œæµ‹è¯•åï¼Œå¯ä»¥æŸ¥çœ‹ä»¥ä¸‹æŠ¥å‘Šï¼š

1. **å•å…ƒæµ‹è¯•æŠ¥å‘Š**: `target/surefire-reports/`
2. **é›†æˆæµ‹è¯•æŠ¥å‘Š**: `target/failsafe-reports/`
3. **è¦†ç›–ç‡æŠ¥å‘Š**: `target/site/jacoco/index.html`

## ğŸ”§ Mavenå‘½ä»¤

```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
mvn test

# åªè¿è¡Œå•å…ƒæµ‹è¯•
mvn test -Dtest="!**/integration/**"

# åªè¿è¡Œé›†æˆæµ‹è¯•
mvn test -Dtest="**/integration/**"

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
mvn test jacoco:report

# å¯åŠ¨åº”ç”¨
mvn spring-boot:run

# æ‰“åŒ…åº”ç”¨
mvn package
```

## ğŸ” APIè®¤è¯æµ‹è¯•

### 1. è·å–Token
```bash
POST /auth/login
{
  "loginType": "ADMIN",
  "username": "superadmin",
  "password": "admin123"
}
```

### 2. ä½¿ç”¨Token
åœ¨Swagger UIä¸­ï¼š
1. ç‚¹å‡»"Authorize"æŒ‰é’®
2. è¾“å…¥è·å–çš„JWT Token
3. æµ‹è¯•éœ€è¦è®¤è¯çš„æ¥å£

## ğŸ“ æœ€ä½³å®è·µ

### ç¼–å†™æµ‹è¯•
1. éµå¾ªAAAæ¨¡å¼ï¼šArrangeï¼ˆå‡†å¤‡ï¼‰ã€Actï¼ˆæ‰§è¡Œï¼‰ã€Assertï¼ˆæ–­è¨€ï¼‰
2. ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•æ–¹æ³•å
3. æ¯ä¸ªæµ‹è¯•åªéªŒè¯ä¸€ä¸ªåŠŸèƒ½ç‚¹
4. ä½¿ç”¨Mockå¯¹è±¡éš”ç¦»ä¾èµ–

### APIæ–‡æ¡£
1. ä¸ºæ‰€æœ‰Controlleræ·»åŠ `@Tag`æ³¨è§£
2. ä¸ºæ‰€æœ‰æ¥å£æ–¹æ³•æ·»åŠ `@Operation`æ³¨è§£
3. ä¸ºå‚æ•°æ·»åŠ `@Parameter`æ³¨è§£
4. ä¸ºå“åº”æ·»åŠ `@ApiResponse`æ³¨è§£

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜
1. **ç¼–è¯‘å¤±è´¥** - æ£€æŸ¥Javaå’ŒMavenç‰ˆæœ¬
2. **æµ‹è¯•å¤±è´¥** - æŸ¥çœ‹æµ‹è¯•æ—¥å¿—ï¼Œæ£€æŸ¥æ•°æ®åº“è¿æ¥
3. **Swaggeræ— æ³•è®¿é—®** - ç¡®è®¤åº”ç”¨å·²å¯åŠ¨ï¼Œæ£€æŸ¥ç«¯å£

### è°ƒè¯•æŠ€å·§
1. å¯ç”¨DEBUGæ—¥å¿—çº§åˆ«
2. ä½¿ç”¨IDEæ–­ç‚¹è°ƒè¯•
3. æŸ¥çœ‹æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Šæ‰¾å‡ºæœªæµ‹è¯•ä»£ç 

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **æ‰©å±•æµ‹è¯•è¦†ç›–ç‡** - ä¸ºæ›´å¤šControllerå’ŒServiceæ·»åŠ æµ‹è¯•
2. **æ·»åŠ æ›´å¤šAPIæ³¨è§£** - å®Œå–„Swaggeræ–‡æ¡£
3. **é›†æˆCI/CD** - é…ç½®æŒç»­é›†æˆæµæ°´çº¿
4. **æ€§èƒ½ä¼˜åŒ–** - åŸºäºæ€§èƒ½æµ‹è¯•ç»“æœä¼˜åŒ–ä»£ç 

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ `TEST_README.md` è¯¦ç»†æ–‡æ¡£
2. è¿è¡Œ `verify-setup.bat` éªŒè¯ç¯å¢ƒ
3. æ£€æŸ¥æµ‹è¯•æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯

---

**æ­å–œï¼æ‚¨çš„äº‘æ‰“å°å°ç¨‹åºåç«¯ç°åœ¨æ‹¥æœ‰äº†å®Œæ•´çš„æµ‹è¯•æ¡†æ¶å’ŒAPIæ–‡æ¡£ç³»ç»Ÿï¼** ğŸ‰
